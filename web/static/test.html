<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>اسکرول افقی با نویگیشن</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      font-family: sans-serif;
    }
    .container {
      height: 100vh;
      width: 100%;
    }
    .Pin-Wrapp {
      display: flex;
      height: 100vh;
    }
    .section {
      flex-shrink: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 2rem;
      color: white;
    }
    #section1 { background: #3498db; }
    #section2 { background: #e67e22; }
    #section3 { background: #2ecc71; }
    .navigation {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 10;
    }
    .navigation li {
      cursor: pointer;
      margin-bottom: 8px;
      color: black;
      background: #f1f1f1;
      padding: 5px 10px;
      border-radius: 4px;
      list-style: none;
    }
  </style>
</head>
<body>

  <ul class="navigation">
    <li data-target="#section1">برو به سکشن ۱</li>
    <li data-target="#section2">برو به سکشن ۲</li>
    <li data-target="#section3">برو به سکشن ۳</li>
  </ul>

  <main class="container">
    <section id="PinSection">
      <div class="Pin-Wrapp" id="wrapper">
        <section class="section" id="section1">سکشن ۱</section>
        <section class="section" id="section2">سکشن ۲</section>
        <section class="section" id="section3">سکشن ۳</section>
      </div>
    </section>
  </main>

  <!-- GSAP Scripts -->
  <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
  <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>
  <script src="https://unpkg.com/gsap@3/dist/ScrollToPlugin.min.js"></script>

  <script>
    gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

    const wrapper = document.querySelector(".Pin-Wrapp");
    const scrollLength = wrapper.scrollWidth - window.innerWidth;

    const scrollTween = gsap.to(wrapper, {
      x: -scrollLength, // حرکت از راست به چپ
      ease: "none",
      scrollTrigger: {
        trigger: "#PinSection",
        start: "top top",
        end: () => `+=${scrollLength}`,
        scrub: true,
        pin: true,
        anticipatePin: 1,
      }
    });

    // نویگیشن کلیک
    document.querySelectorAll(".navigation li").forEach((el) => {
      el.addEventListener("click", () => {
        const targetId = el.getAttribute("data-target");
        const target = document.querySelector(targetId);
        if (!target) return;

        const offsetLeft = target.offsetLeft;
        const totalScroll = scrollTween.scrollTrigger.end;
        const scrollPos = (offsetLeft / scrollLength) * totalScroll;

        gsap.to(window, {
          scrollTo: scrollPos,
          duration: 1.2,
          ease: "power2.out"
        });
      });
    });

    ScrollTrigger.refresh();
  </script>
</body>
</html>
